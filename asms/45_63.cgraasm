MOV, $0, 0
MOV, $4, 64
MAC_LOOP:
WAIT, $1, NET_RECV_WEST
WAIT, $2, NET_RECV_NORTH
MAC, $0, $1, $2
SEND, $1, NET_SEND_EAST
SEND, $2, NET_SEND_SOUTH
SUB, $4, $4, 0x1
I32_CMP_GT, $4, 0, $3
JEQ, MAC_LOOP, $3, 1
SEND, $0, NET_SEND_EAST
MOV, $0, 8
SENDRES_LOOP:
WAIT, $0, NET_RECV_WEST
SEND, $0, NET_SEND_EAST
SUB, $0, $0, 0x1
I32_CMP_GT, $0, 0, $1
JEQ, SENDRES_LOOP, $1, 1
